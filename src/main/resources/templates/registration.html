<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html" lang="ja">
<head>
    <meta charset="UTF-8">
    <title>registration</title>
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
<nav class="nav nav-pills nav-justified">
    <a class="nav-link" th:href="@{/list}">食品</a>
    <a class="nav-link" th:href="@{/dailylistd}">日用品</a>
    <a class="nav-link" th:href="@{/emglist}">防災備蓄</a>
    <a class="nav-link active" aria-current="page" >登録</a>
</nav>
<br>
<form>
    <div class="form-group">
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="flexRadioDefault">
            <label onclick="location.href='food_reg'">食品</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="flexRadioDefault">
            <label onclick="location.href='daily_reg'">日用品</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="flexRadioDefault">
            <label onclick="location.th:href='emergency_reg'">防災備蓄</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="flexRadioDefault">
            <label onclick="location.th:href='shopping_reg'">買い物メモ</label>
        </div>
    </div>
</form>

<br>
<!--<h3>ストック管理アプリケーション</h3>-->
<div class="food_reg" id="reg">
  <thead>
    <script type="text/javascript">
           window.onload = function() {
                 document.getElementById('strage_subtype').style.display="none";
                            }
                 function selectType() {
                            let id = document.getElementById('strage_type').value;

                            if(id=='常温'){
                                        document.getElementById('strage_subtype').style.display="";
                             }else{
                                        document.getElementById('strage_subtype').style.display="none";
                             }
                 }
    </script>
  </thead>
    <h4>食品ストックの登録</h4>
    <form action="/add">
        <table class=" ">
            <table>
                 <tr>
                    <th><label>ストック名</label></th>
                    <td><input name="stock" class="form-control" type="text" /></td>
                </tr>
                <tr>
                    <th><label>買い物メモ</label></th>
                    <td><input name="memo" class="form-control" type="text" /></td>
                </tr>
                <tr>
                    <th><label>個数</label></th>
                    <td><input name="qty" class="form-control" type="number" min="0" max="25" value="" /></td>
                </tr>
                <tr>
                    <th><label>保管種別</label></th>
                    <td>
                      <div>
                        <select id="strage_type" class="form-control" name="type" onchange="selectType()">
                            <option>    </option>
                            <option value="冷凍">冷凍</option>
                            <option value="冷蔵">冷蔵</option>
                            <option value="常温">常温</option>
                        </select>
                      </div>
                            <div>
                                <select id="strage_subtype" class="form-control" name="subtype">
                                    <option>    </option>id
                                    <option>野菜</option>
                                    <option>ソース・素</option>
                                    <option>菓子</option>
                                </select>
                            </div>
                    </td>
                </tr>
                <tr>
                    <th><label>使用可否</label></th>
                    <td>
                        <select id="strage_uby" class="form-control" name="uby">
                            <option>    </option>
                            <option>可</option>
                            <option>不可</option>
                        </select>
                    </td>
            </table><br>
            <button type="submit" class="btn btn-primary" id="add_buttom"
                    onclick="action='/add'; submit();">登録</button>
            <!--  <input type="submit" value="登録" />-->
        </table>
    </form>
</div>
<br><br>
<div class="daily_reg" id="d_reg">
    <h4>日用品ストックの登録</h4>
    <form action="/dailyadd">
        <table class=" ">
            <table>
                <tr>
                    <th><label>ストック名</label></th>
                    <td><input name="daily" class="form-control" type="text" /></td>
                </tr>
                <tr>
                    <th><label>買い物メモ</label></th>
                    <td><input name="memo" class="form-control" type="text" /></td>
                </tr>
                <tr>
                    <th><label>個数</label></th>
                    <td><input name="qty" class="form-control" type="number" min="0" max="25" value="" /></td>
                </tr>
                <tr>
                    <th><label>保管種別</label></th>
                    <td>
                        <select id="strage_dailytype" class="form-control" name="type">
                            <option>    </option>
                            <option>洗剤</option>
                            <option>紙類</option>
                            <option>その他</option>
                        </select>
                    </td>
                </tr>
            </table><br>
            <button type="submit" class="btn btn-primary" id="dailyadd_buttom"
                    onclick="action='/dailyadd' location.th:href='@{/daily}'; submit();">登録</button>
        </table>
    </form>
</div><br><br>
<div class="emergency_reg" id="emg_reg">
    <h4>防災備蓄品ストックの登録</h4>
    <form action="/emgadd">
        <table class=" ">
            <table>
                <tr>
                    <th><label>ストック名</label></th>
                    <td><input name="stock" class="form-control" type="text" /></td>
                </tr>
                <tr>
                    <th><label>買い物メモ</label></th>
                    <td><input name="memo" class="form-control" type="text" /></td>
                </tr>
                <tr>
                    <th><label>個数</label></th>
                    <td><input name="qty" class="form-control" type="number" min="0" max="25" value="" /></td>
                </tr>
                <tr>
                    <th><label>保管種別</label></th>
                    <td>
                        <select id="emg_type" class="form-control" name="type">
                            <option>    </option>
                            <option>飲料</option>
                            <option>食料</option>
                            <option>ガス・電気</option>
                            <option>備品</option>
                        </select>
                    </td>
                </tr>
                <tr>
                        <th><label>消費期限</label></th>
                        <td><input name="exp" class="form-control" type="date" /></td>
                </tr>
            </table><br>
            <button type="submit" class="btn btn-primary" id="emgadd_buttom"
                    onclick="action='/emgadd' location.th:href='@{/emergency}'; submit();">登録</button>
        </table>
    </form>
</div><br><br>
<div class="shopping-memo" id="memo_reg">
      <h5>買い物メモ</h5>
        <div><form name="memoform" id="memoform" role="form">
            <tr>
                <td><input name="message" class="form-control" type="text" style="width:850px; height:80px;"/></td>
            </tr>
            <button type="submit" class="btn btn-success"
                    name="btnsubmit" id="btnSend">送信</button>
        </form>
        </div>
        <script>
                $(document).ready(function() {
                 $('#btnSend').click(function() {
                    $("#btnSend").prop("disabled", true);
                  // フォームのデータをJSONに変換
                    var rawData = $('#memoform').serializeArray();
                    var data = {};
                    jQuery.each(rawData, function(i, e) {
                    data[e.name] = e.value;
                });
                // Ajaxを使ってメールを送信
                $.ajax({
                    type: "POST",
                    url: "./sendmail",
                    dataType: "json",
                    data: JSON.stringify(data),
                    contentType: 'application/json',
                    scriptCharset: 'utf-8',
                    success: function(outdata, dataType) {
                    if (outdata[0] == "OK") alert("メール送信しました");
                     $("#btnSend").prop("disabled", false);
                     },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert("Error : " + errorThrown);
                    $("#btnSend").prop("disabled", false);
                            }
                        });
                     });
                });
            </script>
</div>
</body>
</html>
